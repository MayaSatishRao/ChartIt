{"ast":null,"code":"var _jsxFileName = \"D:\\\\chartjs\\\\chart\\\\src\\\\components\\\\FileUpload.js\",\n    _s = $RefreshSig$();\n\n// importing the required components\nimport React, { Fragment, useState } from \"react\";\nimport { Line } from \"react-chartjs-2\"; // importing the elements of chart.js\n\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend, PointElement, LineElement } from 'chart.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend, PointElement, LineElement); // getting the colors for different datasets\n\nconst colors = [\"#D291BC\", \"#B8DBD0\", \"#FFAF68\", \"#E8A68E\"]; // initial label values\n\nlet labels = ['January', 'February', 'March', 'April', 'May', 'June', 'July']; // initial datasets\n\nconst data = {\n  labels,\n  datasets: [{\n    label: 'Dataset 1',\n    data: labels.map(() => Math.random() * 1000 + 1),\n    borderColor: 'rgb(255, 99, 132)',\n    backgroundColor: 'rgba(255, 99, 132, 0.5)'\n  }, {\n    label: 'Dataset 2',\n    data: labels.map(() => Math.random() * 1000 + 1),\n    borderColor: 'rgb(53, 162, 235)',\n    backgroundColor: 'rgba(53, 162, 235, 0.5)'\n  }]\n}; // variables to store datasets obtained from csv file\n\nlet labels1 = [],\n    datasets = [],\n    xAxis = \"\"; // react FileUpload componenet\n\nconst FileUpload = () => {\n  _s();\n\n  // the standard options for the chart where only title is changed\n  const options = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top'\n      },\n      title: {\n        display: true,\n        text: {\n          title\n        }\n      }\n    }\n  }; // when new file is selected the previous datasets should be erased.\n  // so we are emptying the previous datasets\n\n  labels1 = [];\n  datasets = [];\n  xAxis = \"\"; // creating a state for csv file uploaded and chartdata\n\n  const [file, setFile] = useState();\n  const [chartData, setChartData] = useState(data);\n  const [title, setTitle] = useState(\"Line Chart\"); // this function is used to create dataset from text which we obtain from csv file\n\n  const createJson = text => {\n    const headers = text.slice(0, text.indexOf('\\n')).split(',');\n    const rows = text.slice(text.indexOf('\\n') + 1, text.length).split('\\n');\n    const colNumber = headers.length;\n    const rowNumber = rows.length;\n\n    for (let i = 1; i < colNumber; i++) {\n      const arr = [];\n\n      for (let j = 0; j < rowNumber; j++) {\n        arr.push(rows[j].split(\",\")[i]);\n      }\n\n      const obj = {\n        label: headers[i],\n        data: arr,\n        borderColor: colors[i - 1],\n        backgroundColor: colors[i - 1]\n      };\n      datasets.push(obj);\n    }\n\n    for (let j = 0; j < rowNumber; j++) labels1.push(rows[j].split(\",\")[0]);\n\n    xAxis = headers[0];\n    const finalObject = {\n      labels: labels1,\n      datasets\n    };\n    setChartData(finalObject);\n  }; // function to read the file\n\n\n  const readFile = () => {\n    const uploadedFile = file;\n\n    if (uploadedFile != null) {\n      // creating a file reader and reading the csv file and converting into text\n      const reader = new FileReader();\n\n      reader.onload = e => {\n        createJson(e.target.result);\n      };\n\n      reader.readAsText(uploadedFile);\n      setTitle(uploadedFile.name);\n    }\n  }; // jsx code for the component\n\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"file-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".csv\",\n        id: \"inputGroupFile02\",\n        onChange: e => setFile(e.target.files[0])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onClick: e => {\n          e.preventDefault();\n          if (file) readFile();\n        },\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 12\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(Line, {\n      options: options,\n      data: chartData,\n      height: 1000,\n      width: 2000\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 12\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 13\n  }, this);\n};\n\n_s(FileUpload, \"4LRzJwUp6w0lbb4+RkrV2VvpSiQ=\");\n\n_c = FileUpload;\nexport default FileUpload;\n\nvar _c;\n\n$RefreshReg$(_c, \"FileUpload\");","map":{"version":3,"names":["React","Fragment","useState","Line","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","PointElement","LineElement","register","colors","labels","data","datasets","label","map","Math","random","borderColor","backgroundColor","labels1","xAxis","FileUpload","options","responsive","plugins","legend","position","title","display","text","file","setFile","chartData","setChartData","setTitle","createJson","headers","slice","indexOf","split","rows","length","colNumber","rowNumber","i","arr","j","push","obj","finalObject","readFile","uploadedFile","reader","FileReader","onload","e","target","result","readAsText","name","files","preventDefault"],"sources":["D:/chartjs/chart/src/components/FileUpload.js"],"sourcesContent":["// importing the required components\r\n\r\nimport React, {Fragment, useState} from \"react\";\r\nimport {Line} from \"react-chartjs-2\";\r\n\r\n// importing the elements of chart.js\r\nimport {\r\n     Chart as ChartJS,\r\n     CategoryScale,\r\n     LinearScale,\r\n     BarElement,\r\n     Title,\r\n     Tooltip,\r\n     Legend,\r\n     PointElement,\r\n     LineElement,\r\n   } from 'chart.js';\r\n \r\n   ChartJS.register(\r\n     CategoryScale,\r\n     LinearScale,\r\n     BarElement,\r\n     Title,\r\n     Tooltip,\r\n     Legend,\r\n     PointElement,\r\n     LineElement\r\n   );\r\n\r\n\r\n\r\n// getting the colors for different datasets\r\n const colors = [\"#D291BC\",\"#B8DBD0\",\"#FFAF68\",\"#E8A68E\"];\r\n\r\n// initial label values\r\n let labels = ['January', 'February', 'March', 'April', 'May', 'June', 'July'];\r\n\r\n\r\n// initial datasets\r\nconst data = {\r\n    labels,\r\n    datasets: [\r\n      {\r\n        label: 'Dataset 1',\r\n        data: labels.map(() => Math.random()*1000+1),\r\n        borderColor: 'rgb(255, 99, 132)',\r\n        backgroundColor: 'rgba(255, 99, 132, 0.5)',\r\n      },\r\n      {\r\n        label: 'Dataset 2',\r\n        data: labels.map(() => Math.random()*1000+1),\r\n        borderColor: 'rgb(53, 162, 235)',\r\n        backgroundColor: 'rgba(53, 162, 235, 0.5)',\r\n      },\r\n    ],\r\n  };\r\n\r\n  // variables to store datasets obtained from csv file\r\nlet labels1=[], datasets=[], xAxis=\"\";\r\n\r\n// react FileUpload componenet\r\nconst FileUpload = ()=>{\r\n\r\n  // the standard options for the chart where only title is changed\r\n const options={\r\n  responsive: true,\r\nplugins: {\r\n  legend: {\r\n    position: 'top',\r\n  },\r\n  title: {\r\n    display: true,\r\n    text: {title},\r\n  },\r\n},\r\n}\r\n  // when new file is selected the previous datasets should be erased.\r\n  // so we are emptying the previous datasets\r\n     labels1=[];\r\n     datasets=[];\r\n     xAxis=\"\";\r\n\r\n  // creating a state for csv file uploaded and chartdata\r\n     const [file,setFile] = useState();\r\n     const [chartData,setChartData]=useState(data);\r\n     const [title,setTitle] = useState(\"Line Chart\");\r\n\r\n  // this function is used to create dataset from text which we obtain from csv file\r\n      const createJson = (text)=>{\r\n\r\n          const headers = text.slice(0,text.indexOf('\\n')).split(',');\r\n          const rows = text.slice(text.indexOf('\\n')+1,text.length).split('\\n');\r\n          \r\n          const colNumber = headers.length;\r\n          const rowNumber = rows.length;\r\n\r\n          for(let i=1;i<colNumber;i++){\r\n               const arr = [];\r\n               for(let j=0;j<rowNumber;j++){\r\n                    arr.push(rows[j].split(\",\")[i]);\r\n               }\r\n               const obj = {label:headers[i],\r\n                            data:arr,\r\n                            borderColor: colors[i-1],\r\n                            backgroundColor: colors[i-1]};\r\n               datasets.push(obj);\r\n          }\r\n\r\n          for(let j=0;j<rowNumber;j++)\r\n          labels1.push(rows[j].split(\",\")[0]);\r\n\r\n          xAxis= headers[0];\r\n          \r\n          const finalObject = {labels:labels1,datasets};\r\n          setChartData(finalObject);\r\n      }\r\n\r\n\r\n      // function to read the file\r\n      const readFile = ()=>{\r\n           const uploadedFile = file;\r\n           if(uploadedFile!=null){\r\n             // creating a file reader and reading the csv file and converting into text\r\n               const reader = new FileReader();\r\n               reader.onload=(e)=>{\r\n                    createJson(e.target.result);\r\n               }\r\n               reader.readAsText(uploadedFile);\r\n               setTitle(uploadedFile.name);\r\n           }\r\n      }\r\n     \r\n      // jsx code for the component\r\n     return <Fragment>\r\n           \r\n           <form id=\"file-form\">\r\n           <input type=\"file\" accept=\".csv\"  id=\"inputGroupFile02\" onChange={e=>setFile(e.target.files[0])}/>\r\n           <button type=\"submit\" onClick={(e)=>{\r\n                e.preventDefault();\r\n                if(file)\r\n                readFile();\r\n           }}>Submit</button>\r\n           </form>\r\n           <Line options={options} data={chartData} height={1000} width={2000}/>\r\n             \r\n           \r\n     </Fragment>\r\n}\r\n\r\nexport default FileUpload;"],"mappings":"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"},"metadata":{},"sourceType":"module"}